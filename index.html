<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>Editors: Show-What-I-Mean (SWIM) vs. WYSIWYG</title>
		<meta name="description" content="A framework for easily creating beautiful presentations using HTML">
		<meta name="author" content="Hakim El Hattab">
		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
		<link rel="stylesheet" href="css/reveal.min.css">
		<link rel="stylesheet" href="css/theme/default.css" id="theme">
    <!-- KRM customizations. -->
    <link rel="stylesheet" href="css/custom.css">
		<!-- For syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">
		<!-- If the query includes 'print-pdf', use the PDF print sheet -->
		<script>
			document.write( '<link rel="stylesheet" href="css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
		</script>
		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>
		<div class="reveal">
			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">

        <section>
          <h1>Show-What-I-Mean (SWIM)</h1>
          <h3>A content editor for mobile times</h3>
          <p class="author">
            Kieran Mathieson<br>
            <span style="font-size:70%">Oakland University<br>
              Dolfinity Learning, LLC</span>
          </p>
				</section>

				<section>
					<h2>Users like WYSIWYG</h2>
					<div>
            <ul>
              <li>
                The promise: what authors see on the editor screen is what 
                readers see in the final display.
              </li>
              <li>
                True WYSIWYG is not feasible anymore.
              </li>
              <li>
                <p>Display depends on a 3-way interaction:</p>
                <p class="center" style="margin-top: 1em;">Content x Device x User</p>
              </li>
            </ul>
            <p></p>
            <p></p>
          </div>

<!--					<aside class="notes">

					</aside>-->
				</section>
        
				<section>
          <h2>Formatting &#8658; Intent</h2>
          <h3>(Sometimes)</h3>
          <p class="center">
            <img src="images/aside.png" alt="Aside">
          </p>
          <p class="center">Lose formatting, lose intent.</p>
				</section>

				<section>
					<h2>Semantic markup is good!</h2>
          <p class="center">
            <img src="images/aside.png" alt="Aside">
          </p>
          <p class="center">
            <code>&lt;aside&gt;...&lt;/aside&gt;</code>
          </p>
          <p class="center">
            Let the device render content for its user.
          </p>
				</section>

        <section>
					<h2>Users and markup</h2>
          <p class="markup">
            # The Larch  <span class="user">&nbsp;&nbsp;User: A heading, OK, I get that.</span><br>
            <br>
            The larch is the Cool Dude of trees. Here's a larch:<br>
            <br>
            ![The larch](/sites/default/files/trees/larch.jpg)<br>
            <span class="user">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;User: WTF? What's all the slashy slashy?</span>
          </p>
				</section>

        <section>
					<h2>Users and markup</h2>
          <div class="text-block">
            <p class="center">Markup's precision of intent</p>
            <p class="center">+</p>
            <p class="center">GUI's ease of use</p>
            <p class="center">=</p>
            <p class="center">SWIM</p>
          </div>
          <h3>Demo</h3>
				</section>
        
        
        <section>
					<h2>CKEditor, not &lt;textarea&gt;</h2>
					<div>
            <ul>
              <li>
                Show images, not paths to images.
              </li>
              <li>
                CK was not designed for this use case.
              </li>
              <ul>
                <li>
                  Hide most toolbar buttons.
                </li>
                <li>
                  Turn off CK right-click. 
                </li>
                <li>
                  Do not disable browser spell check.
                </li>
                <li>
                  ...
                </li>
              </ul>
            </ul>
          </div>
					<aside class="notes">
            <p>
              Most tags in Markdown, Textile and other languages are easy 
              for authors to work with.
            </p>
            <p>
              Images are not.
            </p>
            <p>
              It's crucial that authors can see the images they're working with.
            </p>
            
					</aside>
				</section>
        
        <section>
					<h2>Which markup language?</h2>
					<div>
            <ul>
              <li>
                Language issues:
              </li>
              <ul>
                <li>
                  Easy for users.
                </li>
                <li>
                  Has one clear standard.
                </li>
                <li>
                  Has a standard for custom tags (important for my use case).
                </li>
              </ul>
              <li>
                Implementation issues:
              </li>
              <ul>
                <li>
                  Translation code: stable, maintained, and open source.
                </li>
                <li>
                  Easy to implement custom tags.
                </li>
              </ul>
            </ul>
          </div>
				</section>        
        
        <section>
					<h2>reStructuredText</h2>
					<div>
            <ul>
              <li>From the Python programming community.</li>
              <li>Part of DocUtils (open source).</li>
              <li>The canonical translator is stable.</li>
              <ul>
                <li>Written in Python, not PHP.</li>
              </ul>
              <li>Extend a class to make a custom directive (tag).</li>
              <ul>
                <li>Many existing directives.</li>
              </ul>
            </ul>
          </div>
				</section>   

        <section>
					<h2>Drupal integration</h2>
					<div>
            <ul>
              <li>
                Input filter.
              </li>
              <li>
                Text format.
              </li>
              <li>
                CKEditor profile.
              </li>
              <li>
                CKEditor peek plugin.
              </li>
            </ul>
          </div>
				</section>        
                
        
        <section>
					<h2>Problem</h2>
					<div>
            <ul>
              <li>
                I found it hard to set up custom ckeditor.config.js and 
                CK plugin files so that:
              </li>
              <ul>
                <li>
                  The files would not be lost 
                  when CK, the CK module, and the theme are updated, and
                </li>
                <li>
                  CK could be used for both SWIM and WYSIWYG.
                </li>
              </ul>
            </ul>
          </div>
				</section>
        
        
        <section>
					<h2>PHP</h2>
          <div>
            <pre>
function swim_process_filter($text,...) {
  //Preprocessing.
  $desc = array(
      0 => array('pipe', 'r'), // stdin
      1 => array('pipe', 'w'), // stdout
  );
  $py_path = DRUPAL_ROOT . '/' 
      . drupal_get_path('module', 'swim') .'/python/convert_rest.py';
  $command =  'python ' . $py_path;
  $p = proc_open($command, $desc, $pipes);
  fwrite($pipes[0], $text);
  fclose($pipes[0]);
  $html = stream_get_contents($pipes[1]);
  fclose($pipes[1]);
  proc_close($p);
  return $html;
}              
            </pre>
          </div>
				</section>        
        
        <section>
					<h2>Python (minimum)</h2>
          <div>
            <pre>
#Read the content to translate.
data_in = ''
for line in sys.stdin:
    data_in += line
#Translate it.
doc = core.publish_parts(data_in, writer_name='html')['html_body']
#Return translated content to Drupal.
print (doc)
            </pre>
          </div>
				</section>        

        <section>
					<h2>Custom directive</h2>
          <div>
            <p><pre>
#Create the chide directive
class Chide(Directive):
    def run(self):
        if user.can_chide: //user has Drupal perm data.
            target = ''.join(self.content.data)
            text = '&lt;div&gt;Tut, tut! ' + target + '&lt;/div&gt;'
        else:
            text = '&lt;p&gt;You are not allowed to chide.&lt;/p&gt;'
        return [nodes.raw('', text, format='html')]

#Register the new directive.
directives.register_directive('chide', Chide)
            </pre></p>
            <p>
              This returns HTML, but it could return a renderable array instead.<br>
              <small>(probably)</small>
            </p>
          </div>
				</section>        
        
        <section>
					<h2>Performance</h2>
          <div>
            <ul>
              <li>
                I haven't investigated this fully, but at the moment I 
                don't think it's a deal breaker.
              </li>
              <li>
                .pyc - byte-compiled.
              </li>
              <li>
                PyPy, stacklessness, tasklets, continulets, genlets, greenlets and microthreads.
              </li>
            </ul>
          </div>
				</section>
        
        <section>
					<h2>That's all, folks!</h2>
          <p class="center">
            <a href="http://demo.cybercour.se" target="_blank">http://demo.cybercour.se</a>
          </p>
          <p class="center">kieran@dolfinity.com</p>
          <p class="center">mathieso on D.O</p>
				</section>    

			</div>

		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.min.js"></script>

		<script>

			// Full list of configuration options available here:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
				transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

				// Optional libraries used to extend on reveal.js
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
					{ src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
				]
			});

		</script>

	</body>
</html>
